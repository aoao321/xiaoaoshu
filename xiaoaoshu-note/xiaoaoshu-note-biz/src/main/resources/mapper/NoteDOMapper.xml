<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aoao.xiaoaoshu.note.biz.domain.mapper.NoteDOMapper">

    <insert id="insert">
        INSERT INTO t_note (
            id, title, is_content_empty, creator_id, topic_id, topic_name,
            is_top, type, img_uris, video_uri, visible, create_time,
            update_time, status, content_uuid
        ) VALUES (
                     #{note.id}, #{note.title}, #{note.isContentEmpty}, #{note.creatorId}, #{note.topicId}, #{note.topicName},
                     #{note.isTop}, #{note.type}, #{note.imgUris}, #{note.videoUri}, #{note.visible}, #{note.createTime},
                     #{note.updateTime}, #{note.status}, #{note.contentUuid}
                 )
    </insert>
    <update id="updateByPrimaryKey">
        update t_note
        set title            = #{title,jdbcType=VARCHAR},
            is_content_empty = #{isContentEmpty,jdbcType=BIT},
            topic_id         = #{topicId,jdbcType=BIGINT},
            topic_name       = #{topicName,jdbcType=VARCHAR},
            `type`           = #{type,jdbcType=TINYINT},
            img_uris         = #{imgUris,jdbcType=VARCHAR},
            video_uri        = #{videoUri,jdbcType=VARCHAR},
            update_time      = #{updateTime,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="deleteLogically">
        update t_note
        set
            status = #{status,jdbcType=TINYINT},
            update_time = #{updateTime,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" resultType="com.aoao.xiaoaoshu.note.biz.domain.entity.NoteDO">
        select
        *
        from t_note
        where id = #{id,jdbcType=BIGINT} and status = 1
    </select>
</mapper>
